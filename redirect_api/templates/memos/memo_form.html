{% extends 'base.html' %}
{% load widget_tweaks %}

{% block content %}
<div class="container mt-4 memo-content">
    <h2>メモを作成</h2>
    <form method="post" class="form">
        {% csrf_token %}
        <div class="form-group">
            {{ form.title.label_tag }}
            {{ form.title|add_class:"form-control" }}
        </div>
        <div class="form-group">
            {{ form.content.label_tag }}
            {{ form.content|add_class:"form-control" }}
        </div>
        <button type="submit" class="btn btn-success">保存</button>
    </form>
</div>
{% endblock %}
{% block script %}
<script>
    // ページ読み込み時にEasyMDEを初期化
    var easyMDE = new EasyMDE({element: document.getElementById('{{ form.content.id_for_label }}')});

    document.querySelector('.form').addEventListener('submit', function() {
        // ここでは、フォーム送信時にEasyMDEエディタからテキストを取得して、<textarea>にセットする処理のみを行います。
        // EasyMDEエディタからテキストを取得
        var markdownText = easyMDE.value();
        // 取得したテキストを<textarea>にセット
        document.getElementById('{{ form.content.id_for_label }}').value = markdownText;
    });
</script>
{% endblock %}

